{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/thadzy/Documents/Thadzy/FIBO-Store/frontend/src/app/admin/page.tsx"],"sourcesContent":["\"use client\";\nimport { useState, useEffect } from \"react\";\nimport Navbar from \"@/components/Navbar\";\n\ninterface AdminBooking {\n  booking_id: number;\n  user_name: string;\n  status: string;\n  pickup_date: string;\n  return_date: string;\n  purpose: string;\n  items: { name: string; quantity: number }[];\n}\n\nexport default function AdminDashboard() {\n  const [bookings, setBookings] = useState<AdminBooking[]>([]);\n  const [loading, setLoading] = useState(true);\n\n  // 1. ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î\n  const fetchBookings = async () => {\n    try {\n      const res = await fetch(\"http://127.0.0.1:8000/admin/bookings\");\n      if (!res.ok) throw new Error(\"Failed to fetch\");\n      const data = await res.json();\n      setBookings(data);\n    } catch (error) {\n      console.error(error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    fetchBookings();\n  }, []);\n\n  // 2. ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ (‡∏¢‡∏¥‡∏á API PATCH)\n  const handleStatusUpdate = async (id: number, newStatus: string) => {\n    if (!confirm(`‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡πÄ‡∏õ‡πá‡∏ô \"${newStatus}\" ?`)) return;\n\n    try {\n      const res = await fetch(`http://127.0.0.1:8000/bookings/${id}/status`, {\n        method: \"PATCH\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({ status: newStatus }),\n      });\n\n      if (!res.ok) throw new Error(\"Update failed\");\n\n      // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏ô‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏ó‡∏±‡∏ô‡∏ó‡∏µ (‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÇ‡∏´‡∏•‡∏î‡πÉ‡∏´‡∏°‡πà‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î)\n      setBookings((prev) =>\n        prev.map((b) =>\n          b.booking_id === id ? { ...b, status: newStatus } : b\n        )\n      );\n      \n      alert(`‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡πÄ‡∏õ‡πá‡∏ô ${newStatus} ‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢!`);\n    } catch (error) {\n      alert(\"‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï\");\n    }\n  };\n\n  // Helper ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏µ‡∏õ‡πâ‡∏≤‡∏¢‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞\n  const getStatusBadge = (status: string) => {\n    const styles: Record<string, string> = {\n      Pending: \"bg-yellow-100 text-yellow-800 border-yellow-200\",\n      Approved: \"bg-blue-100 text-blue-800 border-blue-200\",\n      Rejected: \"bg-red-100 text-red-800 border-red-200\",\n      Returned: \"bg-green-100 text-green-800 border-green-200\",\n    };\n    return (\n      <span className={`px-2 py-1 rounded-full text-xs font-bold border ${styles[status] || \"bg-gray-100\"}`}>\n        {status}\n      </span>\n    );\n  };\n\n  return (\n    <div className=\"min-h-screen bg-slate-100\">\n      {/* Navbar ‡πÅ‡∏ö‡∏ö Admin (‡∏ã‡πà‡∏≠‡∏ô Cart) */}\n      <nav className=\"bg-white border-b border-slate-200 px-6 py-4 flex justify-between items-center shadow-sm\">\n        <h1 className=\"text-xl font-black text-slate-800 flex items-center gap-2\">\n          FIBO ADMIN <span className=\"text-xs bg-slate-800 text-white px-2 py-0.5 rounded\">Console</span>\n        </h1>\n        <button \n            onClick={fetchBookings} \n            className=\"text-sm text-blue-600 hover:underline font-bold\"\n        >\n            Refresh Data\n        </button>\n      </nav>\n\n      <main className=\"max-w-7xl mx-auto p-6\">\n        <h2 className=\"text-2xl font-bold text-slate-800 mb-6\">‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏Ç‡∏≠‡πÄ‡∏ö‡∏¥‡∏Å‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå</h2>\n\n        {loading ? (\n          <p className=\"text-center mt-10\">Loading dashboard...</p>\n        ) : (\n          <div className=\"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden\">\n            <div className=\"overflow-x-auto\">\n              <table className=\"w-full text-sm text-left\">\n                <thead className=\"bg-slate-50 text-slate-500 font-bold border-b border-slate-200\">\n                  <tr>\n                    <th className=\"px-6 py-4\">ID</th>\n                    <th className=\"px-6 py-4\">User</th>\n                    <th className=\"px-6 py-4\">Items</th>\n                    <th className=\"px-6 py-4\">Dates</th>\n                    <th className=\"px-6 py-4\">Status</th>\n                    <th className=\"px-6 py-4 text-center\">Actions</th>\n                  </tr>\n                </thead>\n                <tbody className=\"divide-y divide-slate-100\">\n                  {bookings.map((booking) => (\n                    <tr key={booking.booking_id} className=\"hover:bg-slate-50 transition-colors\">\n                      <td className=\"px-6 py-4 font-mono text-slate-400\">#{booking.booking_id}</td>\n                      <td className=\"px-6 py-4\">\n                        <p className=\"font-bold text-slate-700\">{booking.user_name}</p>\n                        <p className=\"text-xs text-slate-400 truncate w-48\" title={booking.purpose}>\n                           {booking.purpose}\n                        </p>\n                      </td>\n                      <td className=\"px-6 py-4\">\n                        <ul className=\"space-y-1\">\n                          {booking.items.map((item, idx) => (\n                            <li key={idx} className=\"text-slate-600\">\n                              ‚Ä¢ {item.name} <span className=\"font-bold\">x{item.quantity}</span>\n                            </li>\n                          ))}\n                        </ul>\n                      </td>\n                      <td className=\"px-6 py-4 text-xs text-slate-500\">\n                        <div className=\"flex flex-col gap-1\">\n                            <span>‡∏£‡∏±‡∏ö: {booking.pickup_date}</span>\n                            <span className=\"text-red-400\">‡∏Ñ‡∏∑‡∏ô: {booking.return_date}</span>\n                        </div>\n                      </td>\n                      <td className=\"px-6 py-4\">\n                        {getStatusBadge(booking.status)}\n                      </td>\n                      <td className=\"px-6 py-4\">\n                        <div className=\"flex justify-center gap-2\">\n                          {/* Logic ‡∏õ‡∏∏‡πà‡∏°: ‡πÅ‡∏™‡∏î‡∏á‡∏ï‡∏≤‡∏°‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô */}\n                          {booking.status === \"Pending\" && (\n                            <>\n                              <button\n                                onClick={() => handleStatusUpdate(booking.booking_id, \"Approved\")}\n                                className=\"bg-green-500 hover:bg-green-600 text-white px-3 py-1.5 rounded-lg text-xs font-bold shadow-sm transition-all active:scale-95\"\n                              >\n                                ‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥ ‚úÖ\n                              </button>\n                              <button\n                                onClick={() => handleStatusUpdate(booking.booking_id, \"Rejected\")}\n                                className=\"bg-red-50 hover:bg-red-100 text-red-600 border border-red-200 px-3 py-1.5 rounded-lg text-xs font-bold transition-all active:scale-95\"\n                              >\n                                ‡∏õ‡∏è‡∏¥‡πÄ‡∏™‡∏ò ‚ùå\n                              </button>\n                            </>\n                          )}\n\n                          {booking.status === \"Approved\" && (\n                            <button\n                              onClick={() => handleStatusUpdate(booking.booking_id, \"Returned\")}\n                              className=\"bg-blue-500 hover:bg-blue-600 text-white px-3 py-1.5 rounded-lg text-xs font-bold shadow-sm transition-all active:scale-95\"\n                            >\n                              ‡∏Ñ‡∏∑‡∏ô‡∏Ç‡∏≠‡∏á‡πÅ‡∏•‡πâ‡∏ß üì¶\n                            </button>\n                          )}\n\n                          {(booking.status === \"Rejected\" || booking.status === \"Returned\") && (\n                            <span className=\"text-slate-300 text-xs\">- closed -</span>\n                          )}\n                        </div>\n                      </td>\n                    </tr>\n                  ))}\n                </tbody>\n              </table>\n            </div>\n          </div>\n        )}\n      </main>\n    </div>\n  );\n}"],"names":[],"mappings":"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"}}]
}